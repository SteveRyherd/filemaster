<form action="{{ url_for('handle_module', module_id=module.id) }}" method="post" enctype="multipart/form-data">
    <p>{{ module.description }}</p>
    {% if module.result_data and module.result_data.file_path %}
        <p>Uploaded file:</p>
        {% if module.result_data.file_path.lower().endswith(('png','jpg','jpeg','gif','heic')) %}
            <img src="{{ url_for('uploaded_file', filename=module.result_data.file_path) }}" class="thumb">
        {% else %}
            <a href="{{ url_for('uploaded_file', filename=module.result_data.file_path) }}">Download</a>
        {% endif %}
    {% endif %}
    <input type="file" name="file" required>
    <button type="submit">Upload</button>
</form>
